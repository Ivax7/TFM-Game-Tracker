<div class="position-relative w-100" style="max-width: 400px;">
  <div class="input-group">
    <input
      type="text"
      class="form-control"
      placeholder="Search games, @users"
      [formControl]="searchControl"
      (blur)="hideSuggestions()"
      (focus)="showSuggestions = suggestions.length > 0 && hasValidSearchInput()"
      (keydown.enter)="onGeneralSearch()"
      aria-label="Search games, @users"
      aria-describedby="button-search"
    />
    <button
      class="btn btn-outline-secondary"
      type="button"
      id="button-search"
      (click)="onGeneralSearch()"
      aria-label="Buscar"
    >
      <i class="bi bi-search"></i>
    </button>
  </div>

  <div
    *ngIf="showSuggestions && hasValidSearchInput()"
    class="suggestion-box shadow bg-white border rounded mt-1 position-absolute w-100"
    style="z-index: 1050;"
  >
    <div
      *ngFor="let item of suggestions"
      class="d-flex align-items-center p-2 suggestion-item"
      (click)="onSuggestionClick(item)"
      style="cursor: pointer;"
    >
      <!-- âœ… Caso especial: botÃ³n "Ver todos los usuarios" -->
      <ng-container *ngIf="item.isSeeAll; else normalSuggestion">
        <div class="w-100 text-center text-primary fw-semibold py-1">
          See all
          <span class="fw-bold">
            {{ searchControl.value?.slice(1) }}
          </span>
        </div>
      </ng-container>

      <!-- ðŸ§© Sugerencias normales -->
      <ng-template #normalSuggestion>
        <img
          [src]="isUserSearch ? (item.avatarUrl || 'assets/images/profile-pic.jpg') : item.background_image"
          [alt]="isUserSearch ? (item.displayName || item.name) : item.name"
          width="50"
          height="50"
          class="me-3 rounded"
          style="object-fit: cover;"
        />
        <span class="text-truncate">
          {{ item.displayName || item.name }}
        </span>
      </ng-template>
    </div>
  </div>
</div>
